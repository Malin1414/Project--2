<div class="header">
  <marquee> University of Sri Jayewardenepura. </marquee>
</div>

<!-- MENU SECTION -->
<div class="container">
  <img src="assets/logo.jpg" class="logo" alt="Admin Logo">
  <nav>
    <a routerLink="/student-home">Home</a>
    <a href="#footer">Contact us</a>
    <a routerLink="/staff-profile">
      <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" class="user-icon" alt="User Profile">
    </a>
  </nav>
</div>

<!-- Main Section -->
<div class="main">
  <button class="button1" routerLink="/add-notice">Add a new notice</button>

  <div class="event">
    <h2 class="heading">Your notices</h2>
    <ul>
      <li *ngFor="let notice of notices">
        <i>{{ notice.date }} :</i> {{ notice.text }}
        <button (click)="editNotice(notice)">Edit</button>
        <button (click)="deleteNotice(notice)">Delete</button>
      </li>
    </ul>
  </div>
</div>

<!-- Edit Modal -->
<div *ngIf="showEditModal" class="modal" (click)="closeEditModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <span class="close" (click)="closeEditModal()">&times;</span>
    <h2>Edit Notice</h2>
    <form (submit)="updateNotice(); $event.preventDefault()">
      
      <div class="form-group">
        <label for="editTitle">Title:</label>
        <input type="text" id="editTitle" [(ngModel)]="editingNotice.title" name="title" required>
      </div>
      
      <div class="form-group">
        <label for="editDescription">Description:</label>
        <textarea id="editDescription" [(ngModel)]="editingNotice.description" name="description" required></textarea>
      </div>
      
      <div class="form-group">
        <label>Departments:</label>
        <div class="checkbox-group">
          <div *ngFor="let dept of departments">
            <label>
              <input type="checkbox" [value]="dept.id" [(ngModel)]="dept.selected" [name]="'dept_' + dept.id">
              {{ dept.name }}
            </label>
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label>Batches:</label>
        <div class="checkbox-group">
          <div *ngFor="let batch of batches">
            <label>
              <input type="checkbox" [value]="batch.id" [(ngModel)]="batch.selected" [name]="'batch_' + batch.id">
              {{ batch.name }}
            </label>
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label for="editAttachment">New Attachment (optional):</label>
        <input type="file" id="editAttachment" name="attachment">
        <small style="color: #666;">Leave empty to keep current attachment</small>
      </div>
      
      <div class="form-buttons">
        <button type="submit">Update Notice</button>
        <button type="button" (click)="closeEditModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- FOOTER SECTION -->
<footer id="footer">
  <div class="footer-content">
    <h3>Contact Us</h3>
    <p>University of Sri Jayewardenepura, Gangodawila, Nugegoda</p>
    <p>E-mail : <a href="mailto:info@sjp.ac.lk">info@sjp.ac.lk</a></p>
  </div>
</footer>
